:root{--bg: #fafafe;--text: #1f1f29;--muted: #6b6f76;--border: #e7e4ff;--panel: #ffffff;--purple-200: #d8ccff;--purple-400: #7c6cf5;--purple-500: #6356f2;--purple-600: #4e44e0;--green-600: #0f8a56;--green-700: #0c754a;--shadow: 0 10px 30px rgba(79, 70, 229, .08);--box-size: 420px}*{box-sizing:border-box}html,body,#root{height:100%}body{margin:0;font-family:Proxima Nova,ProximaNova,Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:var(--text);background:radial-gradient(1200px 800px at 10% -10%,#f7f6ff,transparent),var(--bg)}.page{min-height:100%;display:grid;place-items:start center;padding:32px}.card{width:fit-content;max-width:92vw;background:var(--panel);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:18px 18px 22px;margin:0 auto;display:inline-block}.titlebar{display:flex;align-items:center;justify-content:space-between;padding-inline:4px;width:var(--box-size)}.title{margin:0;font-size:22px;font-weight:700;color:var(--purple-600)}.reset-btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid var(--border);background:#fff;color:#4a4e57;padding:8px 14px;border-radius:10px;font-weight:600;cursor:pointer;transition:all .12s ease}.reset-btn:hover{box-shadow:0 2px 10px #0000000f;transform:translateY(-1px)}.interactive-shell{position:relative;margin:14px auto 0;width:var(--box-size);aspect-ratio:1 / 1;border:2px solid var(--purple-200);border-radius:12px;background:#fff;box-shadow:inset 0 0 0 6px #6356f20a;display:grid;place-items:center}.equation{font-weight:800;color:var(--purple-600);filter:drop-shadow(0 8px 30px rgba(99,86,242,.25));letter-spacing:.5px}.fraction{display:inline-flex;flex-direction:column;align-items:center;gap:8px}.fraction .numerator,.fraction .denominator{font-size:48px;line-height:1}.fraction .bar{width:120px;height:6px;background:linear-gradient(90deg,var(--purple-400),var(--purple-600));border-radius:4px}.nav{position:absolute;bottom:96px;left:50%;transform:translate(-50%);display:flex;gap:12px;z-index:5}.nav-btn{width:46px;height:46px;border-radius:50%;border:none;background:var(--green-600);color:#fff;font-size:20px;font-weight:900;cursor:pointer;box-shadow:0 4px 10px #0f8a5640;transition:transform .12s ease,filter .12s ease,background-color .12s ease}.nav-btn:hover{transform:translateY(-1px);filter:brightness(1.05)}.nav-btn:active{transform:translateY(0);filter:brightness(.95)}.coach{position:absolute;left:8px;bottom:18px;display:flex;align-items:flex-end;gap:16px}.mascot{width:64px;height:64px;background:linear-gradient(180deg,#ff9a2f,#ff7a11);border-radius:18px 18px 22px 22px;box-shadow:0 10px 20px #ff7a1140;position:relative}.mascot .eyes{position:absolute;top:22px;left:50%;transform:translate(-50%);display:flex;gap:12px}.mascot .eyes span{width:10px;height:10px;background:#fff;border-radius:50%;box-shadow:inset 0 -2px #00000040}.bubble{position:relative;max-width:280px;background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 14px;color:#3a3e45;font-weight:500;box-shadow:0 8px 24px #0000000f;display:flex;align-items:center;gap:10px;margin-left:-8px;transform:translateY(-14px)}.bubble:before{content:"";position:absolute;left:-10px;top:50%;transform:translateY(-50%);width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-right:10px solid #ffffff;z-index:1}.bubble:after{content:"";position:absolute;left:-12px;top:50%;transform:translateY(-50%);width:0;height:0;border-top:11px solid transparent;border-bottom:11px solid transparent;border-right:11px solid var(--border);z-index:0}.flexi{width:96px;height:auto;object-fit:contain;filter:drop-shadow(0 6px 12px rgba(0,0,0,.08));transform:translateY(6px)}.flexi-big{width:120px}.flexi-teacher{width:88px}.area-models{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:10px;width:calc(var(--box-size) - 48px)}.area-card{position:relative}.line-draw{position:absolute;left:0;top:50%;height:4px;background:linear-gradient(90deg,var(--purple-400),var(--purple-600));border-radius:3px;transform:translateY(-50%);overflow:hidden;width:0;opacity:0}.line-draw.draw{opacity:1;animation:drawLine .65s ease forwards}.line-draw.present{width:100%;opacity:1}.line-draw.erase{width:100%;opacity:1;animation:eraseLine 1s ease forwards}@keyframes drawLine{0%{width:0}to{width:100%}}@keyframes eraseLine{0%{width:100%;opacity:1}to{width:0;opacity:0}}.area-grid{position:relative}.line-draw{left:0;right:0}.area-grid{display:grid;width:100%;aspect-ratio:1 / 1;background:#fafafa;border-radius:8px;overflow:hidden;border:1px solid var(--border)}.area-cell{border-left:2px solid rgba(130,120,255,.25);background:#fff}.area-cell:first-child{border-left:none}.area-cell.filled{background:#6356f22e}.area-label{font-weight:700;color:var(--purple-600)}.actions{display:flex;gap:8px;align-items:center}.random-btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid var(--border);background:#fff;color:var(--purple-600);padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}.random-btn:hover{box-shadow:0 2px 10px #0000000f;transform:translateY(-1px)}.area-single{width:calc(var(--box-size) - 120px)}.area-single .area-card{width:100%}.content-row{display:grid;grid-template-columns:1fr 1fr;align-items:center;width:calc(var(--box-size) - 48px);gap:18px;transform:translateY(-28px)}.area-side .area-card{width:100%}.area-side .area-grid{aspect-ratio:1 / 1}.fraction-side{display:grid;place-items:center;transition:transform .4s ease}.fraction-side.shifted{transform:translate(-54px)}.fraction-large{display:inline-flex;flex-direction:column;align-items:center;gap:10px}.fraction-large .numerator,.fraction-large .denominator{font-size:36px;font-weight:800;color:var(--purple-600)}.fraction-large .bar{width:60px;height:4px;background:linear-gradient(90deg,var(--purple-400),var(--purple-600));border-radius:4px}.multiplier{display:inline-flex;align-items:center;gap:8px;margin-top:8px;font-weight:800;color:var(--purple-600);font-size:28px}.multiplier .mini-frac{display:inline-flex;flex-direction:column;align-items:center;gap:10px}.multiplier .mini-num,.multiplier .mini-den{font-size:36px;line-height:1}.multiplier .bar{width:60px;height:4px;background:linear-gradient(90deg,var(--purple-400),var(--purple-600));border-radius:4px}.frac-wrap.with-mult{gap:12px}.fraction-side.compact .fraction-large .numerator,.fraction-side.compact .fraction-large .denominator{font-size:28px}.fraction-side.compact .fraction-large .bar{width:44px;height:3px}.fraction-side.compact .multiplier{font-size:22px}.fraction-side.compact .multiplier .mini-num,.fraction-side.compact .multiplier .mini-den{font-size:28px}.fraction-side.compact .multiplier .bar{width:44px;height:3px}.fraction-side.compact .multiplier{transform:none}.fraction-side.compact .multiplier .mini-frac{transform:translateY(-4px)}.fraction-side.intro-left .fraction-large .numerator,.fraction-side.intro-left .fraction-large .denominator{font-size:28px}.fraction-side.intro-left .fraction-large .bar{width:44px;height:3px}.equals{font-weight:900;color:var(--purple-600);font-size:28px;opacity:0;transform:translateY(6px);transition:opacity .22s ease,transform .22s ease}.result{opacity:0;transform:translateY(6px);transition:opacity .22s ease,transform .22s ease}.appear{opacity:0;transform:translateY(6px)}.appear.visible{opacity:1!important;transform:translateY(0)!important}.frac-wrap{display:inline-flex;align-items:center;gap:12px}.fraction-side.compact .equals{font-size:22px}.fraction-side.compact .result .numerator,.fraction-side.compact .result .denominator{font-size:28px}.fraction-side.compact .result .bar{width:44px;height:3px}.bubble-left-more{margin-left:-14px}.bubble-down{transform:translateY(6px)}.step0-up{transform:translateY(-36px)}.mini-frac.glow{position:relative;filter:drop-shadow(0 0 6px rgba(79,70,229,.55)) drop-shadow(0 0 12px rgba(79,70,229,.4))}.mini-frac.glow .mini-num,.mini-frac.glow .mini-den{color:var(--purple-600)}.content-row.intro-center{grid-template-columns:1fr;justify-items:center;transform:none}.fraction-side.full{display:grid;place-items:center}.content-row.intro-shift{grid-template-columns:1fr}.fraction-side.intro-left{justify-self:start;transform:translate(-24px)}.area-side.intro-hide{visibility:hidden}.fraction-side.intro-left{transform:translate(-24px)}.fraction-side.intro-left .fraction-large .numerator,.fraction-side.intro-left .fraction-large .denominator{font-size:36px}.fraction-side.intro-left .fraction-large .bar{width:60px;height:4px}.fraction-side.intro-left{transform:translate(-24px);transition:transform .4s ease}.bubble-step1-down{transform:translateY(-8px)}.toolbox{position:absolute;top:12px;right:12px;z-index:4;display:flex;gap:8px}.tool-btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:linear-gradient(180deg,#ff9a2f,#ff7a11);color:#fff;padding:6px 12px;border-radius:12px;font-weight:800;cursor:pointer;box-shadow:0 6px 16px #ff7a1159;transition:transform .12s ease,filter .12s ease;white-space:nowrap}.tool-btn:hover{transform:translateY(-1px);filter:brightness(1.03)}.tool-btn:disabled{opacity:.6;cursor:not-allowed;filter:none;transform:none}@media (max-width: 640px){.toolbox{top:8px;right:8px}.tool-btn{padding:5px 8px;font-size:13px}}.area-side{position:relative}.toolbox{position:absolute;top:-42px;left:50%;transform:translate(-50%);z-index:4;display:flex;gap:8px}@media (max-width: 640px){.toolbox{top:-28px;left:50%;transform:translate(-50%)}.tool-btn{padding:5px 8px;font-size:13px}}@media (max-width: 640px){:root{--box-size: min(320px, 92vw)}.fraction .numerator,.fraction .denominator{font-size:38px}.fraction .bar{width:100px}.nav{bottom:96px}.nav{gap:10px}.nav-btn{width:36px;height:36px;font-size:16px}.mascot{width:54px;height:54px}.bubble{max-width:220px;transform:translateY(-8px)}.bubble-step1-down{transform:translateY(2px)}.coach{z-index:3;pointer-events:none}.flexi{width:84px}.content-row{width:calc(var(--box-size) - 36px);gap:12px;transform:translateY(-44px)}.fraction-large .numerator,.fraction-large .denominator{font-size:30px}.fraction-large .bar{width:52px;height:4px}.fraction-side.shifted{transform:translate(-36px)}.multiplier{gap:6px;margin-top:6px;font-size:24px}.multiplier .mini-num,.multiplier .mini-den{font-size:30px}.multiplier .bar{width:52px;height:4px}.fraction-side.compact .fraction-large .numerator,.fraction-side.compact .fraction-large .denominator{font-size:24px}.fraction-side.compact .fraction-large .bar{width:38px;height:3px}.fraction-side.compact .multiplier{font-size:20px}.fraction-side.compact .multiplier .mini-num,.fraction-side.compact .multiplier .mini-den{font-size:24px}.fraction-side.compact .multiplier .bar{width:38px;height:3px}.fraction-side.compact .multiplier{transform:none}.fraction-side.compact .multiplier .mini-frac{transform:translateY(-2px)}.fraction-side.intro-left .fraction-large .numerator,.fraction-side.intro-left .fraction-large .denominator{font-size:24px}.fraction-side.intro-left .fraction-large .bar{width:38px;height:3px}.fraction-side.intro-left .fraction-large .numerator,.fraction-side.intro-left .fraction-large .denominator{font-size:30px}.fraction-side.intro-left .fraction-large .bar{width:52px;height:4px}.bubble-down{transform:translateY(22px)}}
